<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Chosen Palette: Unified Calm Blue and Slate -->
    <!-- Application Structure Plan: H·ª£p nh·∫•t hai ·ª©ng d·ª•ng th√†nh m·ªôt C·ªïng Tra c·ª©u duy nh·∫•t. C·∫•u tr√∫c s·ª≠ d·ª•ng m·ªôt thanh ƒëi·ªÅu h∆∞·ªõng c·ªë ƒë·ªãnh (navigation bar) ƒë·ªÉ chuy·ªÉn ƒë·ªïi gi·ªØa c√°c ch·ª©c nƒÉng ch√≠nh: 'Tra c·ª©u Th·ªß t·ª•c' v√† '∆Ø·ªõc t√≠nh Chi ph√≠'. M·ªôt m·ª•c 'Th√¥ng tin tham kh·∫£o' ƒë∆∞·ª£c th√™m v√†o, s·ª≠ d·ª•ng giao di·ªán accordion ƒë·ªÉ tr√¨nh b√†y g·ªçn g√†ng c√°c ph√¢n t√≠ch v√† b·∫£ng tra c·ª©u ph·ª•. Thi·∫øt k·∫ø n√†y t·∫°o ra m·ªôt c√¥ng c·ª• to√†n di·ªán, cho ph√©p ng∆∞·ªùi d√πng truy c·∫≠p m·ªçi th√¥ng tin c·∫ßn thi·∫øt m·ªôt c√°ch li·ªÅn m·∫°ch, kh√¥ng c·∫ßn t·∫£i l·∫°i trang hay m·ªü nhi·ªÅu ·ª©ng d·ª•ng. C·∫•u tr√∫c n√†y ∆∞u ti√™n s·ª± r√µ r√†ng, d·ªÖ s·ª≠ d·ª•ng v√† hi·ªáu su·∫•t tr√™n m·ªçi thi·∫øt b·ªã. -->
    <!-- Visualization & Content Choices: Gi·ªØ l·∫°i t·∫•t c·∫£ c√°c ch·ª©c nƒÉng c·ªët l√µi c·ªßa c·∫£ hai ·ª©ng d·ª•ng. 'Tra c·ª©u th·ªß t·ª•c' s·ª≠ d·ª•ng l∆∞·ªõi th·∫ª flexbox v√† bi·ªÉu ƒë·ªì th·ªùi gian. '∆Ø·ªõc t√≠nh chi ph√≠' s·ª≠ d·ª•ng c√¥ng c·ª• t√≠nh to√°n t∆∞∆°ng t√°c v√† bi·ªÉu ƒë·ªì so s√°nh chi ph√≠. C√°c th√¥ng tin ph·ª• ƒë∆∞·ª£c t·ªï ch·ª©c trong accordion ƒë·ªÉ tr√°nh l√†m trang qu√° d√†i v√† kh√≥ ƒëi·ªÅu h∆∞·ªõng tr√™n di ƒë·ªông. M·ªçi th√†nh ph·∫ßn ƒë·ªÅu ƒë∆∞·ª£c ki·ªÉm tra ƒë·ªÉ ƒë·∫£m b·∫£o t∆∞∆°ng th√≠ch t·ªëi ƒëa v·ªõi iOS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <title>C·ªïng Tra c·ª©u ƒê·∫•t ƒëai - ƒê·ªìng Nai 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Be Vietnam Pro', sans-serif; background-color: #f8fafc; }
        .main-section { display: none; }
        .main-section.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Navigation Styles */
        .nav-link { transition: all 0.2s ease; border-bottom: 3px solid transparent; }
        .nav-link.active, .nav-link:hover { color: #3b82f6; border-bottom-color: #3b82f6; }
        
        /* Procedure Card Styles */
        .procedure-card { background-color: white; border-radius: 0.75rem; padding: 1rem; border: 2px solid transparent; cursor: pointer; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); transition: border-color 0.2s; }
        .procedure-card.active { border-color: #2563eb; }
        
        /* Details & Chart Wrapper Styles */
        #details-container ul, #fee-details-container ul { list-style-position: inside; }
        #details-container ul li::marker, #fee-details-container ul li::marker { color: #3b82f6; }
        .chart-wrapper { background-color: white; padding: 1rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); border: 1px solid #e2e8f0; }
        .chart-container { position: relative; width: 100%; margin: auto; }

        /* Accordion Styles */
        .accordion-header { cursor: pointer; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .accordion-item.active .accordion-content { max-height: 1000px; /* Large enough to fit content */ }
        .accordion-item.active .accordion-icon { transform: rotate(180deg); }
        .accordion-icon { transition: transform 0.3s; }

    </style>
</head>
<body class="text-slate-800">

    <header class="bg-white/90 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-blue-700">C·ªïng Tra c·ª©u ƒê·∫•t ƒëai</h1>
                </div>
                <div class="hidden md:flex items-baseline space-x-4">
                    <a href="#thu-tuc" class="nav-link px-3 py-2 text-sm font-semibold">Tra c·ª©u Th·ªß t·ª•c</a>
                    <a href="#chi-phi" class="nav-link px-3 py-2 text-sm font-semibold">∆Ø·ªõc t√≠nh Chi ph√≠</a>
                    <a href="#thong-tin" class="nav-link px-3 py-2 text-sm font-semibold">Th√¥ng tin Tham kh·∫£o</a>
                </div>
                <div class="md:hidden">
                    <select id="mobile-nav" class="bg-white border border-gray-300 rounded-md py-2 pl-3 pr-10 text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <option value="thu-tuc">Tra c·ª©u Th·ªß t·ª•c</option>
                        <option value="chi-phi">∆Ø·ªõc t√≠nh Chi ph√≠</option>
                        <option value="thong-tin">Th√¥ng tin Tham kh·∫£o</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <!-- SECTION 1: TRA C·ª®U TH·ª¶ T·ª§C -->
        <section id="thu-tuc" class="main-section">
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900">1. Tra c·ª©u Th·ªß t·ª•c H√†nh ch√≠nh</h2>
                <p class="mt-2 text-slate-600 max-w-3xl mx-auto">Ch·ªçn m·ªôt th·ªß t·ª•c ƒë·ªÉ xem chi ti·∫øt h·ªì s∆°, th·ªùi gian gi·∫£i quy·∫øt v√† c√°c l∆∞u √Ω quan tr·ªçng.</p>
            </div>
            <div id="procedures-grid" class="flex flex-wrap gap-4 justify-center"></div>
            <div id="details-section" class="mt-12">
                <div id="details-container" class="bg-white p-6 md:p-8 rounded-xl shadow-lg border border-slate-200 min-h-[300px] flex items-center justify-center">
                    <div class="text-center text-slate-500">
                        <svg class="mx-auto h-12 w-12 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                        <h3 class="mt-2 text-lg font-medium text-slate-900">Th√¥ng tin chi ti·∫øt th·ªß t·ª•c</h3>
                        <p class="mt-1">Vui l√≤ng ch·ªçn m·ªôt th·ªß t·ª•c t·ª´ danh s√°ch tr√™n.</p>
                    </div>
                </div>
            </div>
            <hr class="my-16 border-slate-200">
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900">So s√°nh Th·ªùi gian Gi·∫£i quy·∫øt</h2>
                <p class="mt-2 text-slate-600 max-w-3xl mx-auto">Bi·ªÉu ƒë·ªì th·ªÉ hi·ªán s·ªë ng√†y l√†m vi·ªác t·ªëi ƒëa ƒë·ªÉ ho√†n th√†nh m·ªói th·ªß t·ª•c (kh√¥ng t√≠nh nghƒ©a v·ª• t√†i ch√≠nh).</p>
            </div>
            <div class="chart-wrapper">
                <div class="chart-container" id="time-chart-container">
                    <canvas id="timeChart"></canvas>
                </div>
            </div>
        </section>

        <!-- SECTION 2: ∆Ø·ªöC T√çNH CHI PH√ç -->
        <section id="chi-phi" class="main-section">
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900">2. ∆Ø·ªõc t√≠nh Ph√≠ v√† L·ªá ph√≠</h2>
                <p class="mt-2 text-slate-600 max-w-3xl mx-auto">D·ª±a tr√™n NQ 21 & 22/2024/NQ-HƒêND. Ch·ªçn th√¥ng tin ƒë·ªÉ t√≠nh to√°n chi ph√≠ v√† xem l·ª£i √≠ch khi n·ªôp h·ªì s∆° tr·ª±c tuy·∫øn.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                    <h3 class="text-xl font-semibold mb-4 text-slate-800">Th√¥ng tin Giao d·ªãch</h3>
                    <div class="space-y-4">
                        <div>
                            <label for="feeProcedureType" class="block text-sm font-medium text-slate-700">Lo·∫°i th·ªß t·ª•c</label>
                            <select id="feeProcedureType" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"></select>
                        </div>
                        <div>
                            <label for="applicantType" class="block text-sm font-medium text-slate-700">ƒê·ªëi t∆∞·ª£ng</label>
                            <select id="applicantType" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"></select>
                        </div>
                         <div>
                            <label for="region" class="block text-sm font-medium text-slate-700">Khu v·ª±c</label>
                            <select id="region" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"></select>
                        </div>
                    </div>
                </div>
                <div class="lg:col-span-3 bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                     <h3 class="text-xl font-semibold mb-4 text-slate-800">K·∫øt qu·∫£ ∆Ø·ªõc t√≠nh</h3>
                     <div id="fee-details-container" class="space-y-4">
                        <div class="p-4 bg-blue-50 rounded-lg">
                            <p class="font-medium text-slate-600">N·ªôp h·ªì s∆° <span class="font-bold text-blue-700">TR·ª∞C TI·∫æP</span>:</p>
                            <p id="cost-direct" class="text-2xl font-bold text-blue-800 mt-1">...</p>
                        </div>
                        <div class="p-4 bg-green-50 rounded-lg">
                             <p class="font-medium text-slate-600">N·ªôp h·ªì s∆° <span class="font-bold text-green-700">TR·ª∞C TUY·∫æN</span> (Online):</p>
                             <p id="cost-online" class="text-2xl font-bold text-green-800 mt-1">...</p>
                             <p id="savings" class="text-sm font-semibold text-green-600 mt-2"></p>
                        </div>
                        <p class="text-xs text-slate-500 text-center italic mt-4">L∆∞u √Ω: Chi ph√≠ ch∆∞a bao g·ªìm L·ªá ph√≠ tr∆∞·ªõc b·∫° v√† c√°c nghƒ©a v·ª• t√†i ch√≠nh kh√°c.</p>
                     </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: TH√îNG TIN THAM KH·∫¢O -->
        <section id="thong-tin" class="main-section">
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900">3. Th√¥ng tin Tham kh·∫£o</h2>
                <p class="mt-2 text-slate-600 max-w-3xl mx-auto">Gi·∫£i ƒë√°p c√°c c√¢u h·ªèi th∆∞·ªùng g·∫∑p v√† th√¥ng tin li√™n quan kh√°c.</p>
            </div>
            <div class="space-y-4 max-w-4xl mx-auto">
                <!-- Accordion Item 1 -->
                <div class="accordion-item bg-white rounded-lg shadow-md border border-slate-200">
                    <div class="accordion-header flex justify-between items-center p-4">
                        <h3 class="font-semibold text-slate-800">T·∫°i sao l·∫°i c√≥ s·ª± thay ƒë·ªïi v·ªÅ ph√≠ v√† l·ªá ph√≠?</h3>
                        <span class="accordion-icon">‚ñº</span>
                    </div>
                    <div class="accordion-content px-4 pb-4">
                        <p class="text-slate-600">Vi·ªác ƒëi·ªÅu ch·ªânh nh·∫±m c√°c m·ª•c ƒë√≠ch ch√≠nh: <br> 1. ƒê·ªìng b·ªô v·ªõi Lu·∫≠t ƒê·∫•t ƒëai 2024 m·ªõi. <br> 2. Ph√π h·ª£p v·ªõi t√¨nh h√¨nh kinh t·∫ø - x√£ h·ªôi. <br> 3. Khuy·∫øn kh√≠ch ng∆∞·ªùi d√¢n s·ª≠ d·ª•ng d·ªãch v·ª• c√¥ng tr·ª±c tuy·∫øn ƒë·ªÉ ti·∫øt ki·ªám chi ph√≠ v√† th·ªùi gian.</p>
                    </div>
                </div>
                <!-- Accordion Item 2 -->
                <div class="accordion-item bg-white rounded-lg shadow-md border border-slate-200">
                    <div class="accordion-header flex justify-between items-center p-4">
                        <h3 class="font-semibold text-slate-800">Th√¥ng tin v·ªÅ B·∫£ng gi√° ƒë·∫•t c·ªßa t·ªânh?</h3>
                        <span class="accordion-icon">‚ñº</span>
                    </div>
                    <div class="accordion-content px-4 pb-4">
                        <p class="text-slate-600">Theo Quy·∫øt ƒë·ªãnh 86/2024/Qƒê-UBND, t·ªânh ƒê·ªìng Nai s·∫Ω **ti·∫øp t·ª•c √°p d·ª•ng B·∫£ng gi√° ƒë·∫•t giai ƒëo·∫°n 2020-2024 cho ƒë·∫øn h·∫øt ng√†y 31/12/2025**. B·∫Øt ƒë·∫ßu t·ª´ 01/01/2026, t·ªânh s·∫Ω ban h√†nh B·∫£ng gi√° ƒë·∫•t h√†ng nƒÉm theo quy ƒë·ªãnh c·ªßa Lu·∫≠t ƒê·∫•t ƒëai 2024.</p>
                    </div>
                </div>
                <!-- Accordion Item 3 -->
                <div class="accordion-item bg-white rounded-lg shadow-md border border-slate-200">
                    <div class="accordion-header flex justify-between items-center p-4">
                        <h3 class="font-semibold text-slate-800">Ph√≠ khai th√°c t√†i li·ªáu ƒë·∫•t ƒëai l√† bao nhi√™u?</h3>
                        <span class="accordion-icon">‚ñº</span>
                    </div>
                    <div class="accordion-content px-4 pb-4">
                        <p class="text-slate-600 mb-2">Theo NQ 24/2024/NQ-HƒêND, m·ªôt s·ªë m·ª©c ph√≠ ch√≠nh nh∆∞ sau:</p>
                        <ul class="list-disc pl-5 text-slate-600">
                            <li>Tr√≠ch l·ª•c b·∫£n ƒë·ªì, tr√≠ch ƒëo ƒë·ªãa ch√≠nh: **160.000ƒë/th·ª≠a ƒë·∫•t**</li>
                            <li>Th√¥ng tin t·ªïng h·ª£p v·ªÅ th·ª≠a ƒë·∫•t: **220.000ƒë/h·ªì s∆°**</li>
                            <li>Sao ch·ª•p h·ªì s∆° ƒë·∫•t ƒëai: **22.000ƒë/trang A4**</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-800 text-slate-300 mt-16">
        <div class="container mx-auto px-6 py-8 text-center text-sm">
            <p><strong class="font-semibold text-white">L∆∞u √Ω:</strong> Th√¥ng tin tr√™n trang n√†y ch·ªâ c√≥ t√≠nh ch·∫•t tham kh·∫£o, kh√¥ng thay th·∫ø vƒÉn b·∫£n ph√°p lu·∫≠t ch√≠nh th·ª©c.</p>
            <p class="mt-2">ƒê·ªÉ c√≥ th√¥ng tin ch√≠nh x√°c tuy·ªát ƒë·ªëi, vui l√≤ng li√™n h·ªá c∆° quan nh√† n∆∞·ªõc c√≥ th·∫©m quy·ªÅn.</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- DATA ---
        const proceduresData = [
            { id: 'chuyen_quyen', title: 'Chuy·ªÉn quy·ªÅn', time: 8, docs: ['Gi·∫•y ch·ª©ng nh·∫≠n (GCN) ƒë√£ c·∫•p.', 'ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'H·ª£p ƒë·ªìng, vƒÉn b·∫£n v·ªÅ vi·ªác chuy·ªÉn quy·ªÅn (chuy·ªÉn nh∆∞·ª£ng, t·∫∑ng cho, th·ª´a k·∫ø...).', 'VƒÉn b·∫£n ·ªßy quy·ªÅn (n·∫øu c√≥).'], notes: ['N·∫øu nhi·ªÅu ng∆∞·ªùi nh·∫≠n chung 1 GCN th√¨ c·∫ßn c√≥ vƒÉn b·∫£n th·ªèa thu·∫≠n.', 'N·∫øu ƒë·∫•t ƒëang th·∫ø ch·∫•p, c·∫ßn c√≥ vƒÉn b·∫£n ƒë·ªìng √Ω c·ªßa ng√¢n h√†ng.'] },
            { id: 'dieu_chinh', title: 'ƒêi·ªÅu ch·ªânh th√¥ng tin', time: 4, docs: ['GCN ƒë√£ c·∫•p.', 'ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'B·∫£n sao gi·∫•y t·ªù ch·ª©ng minh vi·ªác thay ƒë·ªïi th√¥ng tin (n·∫øu kh√¥ng khai th√°c ƒë∆∞·ª£c t·ª´ CSDL d√¢n c∆∞).'], notes: ['√Åp d·ª•ng khi thay ƒë·ªïi th√¥ng tin c√° nh√¢n nh∆∞ t√™n, s·ªë CCCD, ƒë·ªãa ch·ªâ...'] },
            { id: 'gia_han_nn', title: 'Gia h·∫°n ƒë·∫•t n√¥ng nghi·ªáp', time: 7, docs: ['GCN ƒë√£ c·∫•p.', 'ƒê∆°n xin x√°c nh·∫≠n l·∫°i th·ªùi h·∫°n s·ª≠ d·ª•ng ƒë·∫•t n√¥ng nghi·ªáp (M·∫´u 09).'], notes: ['Th·ªß t·ª•c d·ª±a tr√™n Nƒê 102/2024/Nƒê-CP.'] },
            { id: 'han_che_lien_ke', title: 'X√°c l·∫≠p/thay ƒë·ªïi h·∫°n ch·∫ø li·ªÅn k·ªÅ', time: 5, docs: ['GCN ƒë√£ c·∫•p.', 'ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'VƒÉn b·∫£n th·ªèa thu·∫≠n v·ªÅ vi·ªác x√°c l·∫≠p/thay ƒë·ªïi quy·ªÅn s·ª≠ d·ª•ng h·∫°n ch·∫ø th·ª≠a ƒë·∫•t li·ªÅn k·ªÅ (k√®m s∆° h·ªça).'], notes: [] },
            { id: 'gq_tranh_chap', title: 'Nh·∫≠n quy·ªÅn theo KQ tranh ch·∫•p', time: 8, docs: ['GCN ƒë√£ c·∫•p.', 'ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'Bi√™n b·∫£n h√≤a gi·∫£i th√†nh, Quy·∫øt ƒë·ªãnh c·ªßa c∆° quan c√≥ th·∫©m quy·ªÅn ho·∫∑c B·∫£n √°n/Quy·∫øt ƒë·ªãnh c·ªßa T√≤a √°n ƒë√£ c√≥ hi·ªáu l·ª±c.'], notes: [] },
            { id: 'xu_ly_the_chap', title: 'Nh·∫≠n quy·ªÅn do x·ª≠ l√Ω t√†i s·∫£n th·∫ø ch·∫•p', time: 8, docs: ['GCN ƒë√£ c·∫•p.', 'ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'H·ª£p ƒë·ªìng mua b√°n t√†i s·∫£n ƒë·∫•u gi√° ho·∫∑c VB x√°c nh·∫≠n k·∫øt qu·∫£ thi h√†nh √°n.', 'H·ª£p ƒë·ªìng th·∫ø ch·∫•p.'], notes: [] },
            { id: 'xoa_no', title: 'X√≥a ghi n·ª£', time: 1, docs: ['GCN ƒë√£ c·∫•p.', 'Gi·∫•y t·ªù ch·ª©ng minh ƒë√£ ho√†n th√†nh vi·ªác thanh to√°n n·ª£ ti·ªÅn s·ª≠ d·ª•ng ƒë·∫•t, l·ªá ph√≠ tr∆∞·ªõc b·∫°.'], notes: ['N·∫øu n·ªôp sau 15h, k·∫øt qu·∫£ s·∫Ω ƒë∆∞·ª£c tr·∫£ v√†o ng√†y l√†m vi·ªác ti·∫øp theo.'] },
            { id: 'dinh_chinh', title: 'ƒê√≠nh ch√≠nh GCN sai s√≥t', time: 8, docs: ['GCN ƒë√£ c·∫•p (b·∫£n g·ªëc).', 'ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'Gi·∫•y t·ªù ch·ª©ng minh c√≥ sai s√≥t so v·ªõi th√¥ng tin t·∫°i th·ªùi ƒëi·ªÉm ƒë·ªÅ ngh·ªã ƒë√≠nh ch√≠nh.'], notes: [] },
            { id: 'chuyen_muc_dich', title: 'Chuy·ªÉn m·ª•c ƒë√≠ch (kh√¥ng xin ph√©p)', time: 7, docs: ['GCN ƒë√£ c·∫•p.', 'ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).'], notes: ['C∆° quan s·∫Ω g·ª≠i th√¥ng tin ƒë·∫øn c∆° quan thu·∫ø ƒë·ªÉ x√°c ƒë·ªãnh nghƒ©a v·ª• t√†i ch√≠nh (n·∫øu c√≥).'] },
            { id: 'tach_hop_thua', title: 'T√°ch/H·ª£p th·ª≠a', time: 12, docs: ['GCN ƒë√£ c·∫•p (b·∫£n g·ªëc ho·∫∑c b·∫£n sao c√¥ng ch·ª©ng/ƒë·ªëi chi·∫øu).', 'ƒê∆°n ƒë·ªÅ ngh·ªã t√°ch th·ª≠a/h·ª£p th·ª≠a (M·∫´u 21).', 'B·∫£n v·∫Ω t√°ch th·ª≠a/h·ª£p th·ª≠a (M·∫´u 22).'], notes: [] },
            { id: 'tach_thua_quyen', title: 'T√°ch th·ª≠a k√®m chuy·ªÉn quy·ªÅn', time: null, docs: ['H·ªì s∆° nh∆∞ T√°ch/H·ª£p th·ª≠a.', 'H·ª£p ƒë·ªìng, vƒÉn b·∫£n v·ªÅ vi·ªác chuy·ªÉn quy·ªÅn s·ª≠ d·ª•ng m·ªôt ph·∫ßn th·ª≠a ƒë·∫•t.'], notes: ['Th·ªùi gian gi·∫£i quy·∫øt t√πy thu·ªôc quy tr√¨nh c·ª• th·ªÉ.'] },
            { id: 'cap_doi', title: 'C·∫•p ƒë·ªïi GCN', time: 10, docs: ['GCN ƒë√£ c·∫•p.', 'ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'H·ªì s∆° k·ªπ thu·∫≠t (n·∫øu c√≥ thay ƒë·ªïi ranh gi·ªõi, di·ªán t√≠ch).'], notes: ['Th·ªùi gian kh√¥ng qu√° 5 ng√†y n·∫øu kh√¥ng bi·∫øn ƒë·ªông di·ªán t√≠ch, kh√¥ng qu√° 10 ng√†y n·∫øu c√≥ bi·∫øn ƒë·ªông.', '√Åp d·ª•ng cho GCN b·ªã h·ªèng, r√°ch; c·∫ßn ghi ƒë·ªß t√™n th√†nh vi√™n h·ªô gia ƒë√¨nh, t√™n v·ª£/ch·ªìng...'] },
            { id: 'cap_lai', title: 'C·∫•p l·∫°i GCN do b·ªã m·∫•t', time: 10, docs: ['ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'Gi·∫•y x√°c nh·∫≠n c·ªßa UBND x√£ v·ªÅ vi·ªác ƒë√£ ni√™m y·∫øt th√¥ng b√°o m·∫•t gi·∫•y.', 'M·∫£nh tr√≠ch ƒëo (n·∫øu c√≥ nhu c·∫ßu ƒëo ƒë·∫°c l·∫°i).'], notes: ['Quy tr√¨nh c·∫ßn c√≥ b∆∞·ªõc ni√™m y·∫øt c√¥ng khai vi·ªác m·∫•t GCN t·∫°i UBND c·∫•p x√£.'] },
            { id: 'tang_cho_nn', title: 'T·∫∑ng cho Nh√† n∆∞·ªõc/c·ªông ƒë·ªìng', time: null, docs: ['GCN ƒë√£ c·∫•p.', 'VƒÉn b·∫£n t·∫∑ng cho QSDƒê.'], notes: ['H·ªì s∆° ph·∫£i do UBND x√£ ti·∫øp nh·∫≠n v√† chuy·ªÉn v·ªÅ VPƒêK.'] },
            { id: 'thu_hoi_sai', title: 'Thu h·ªìi GCN c·∫•p sai', time: 25, docs: ['VƒÉn b·∫£n ki·∫øn ngh·ªã c·ªßa ng∆∞·ªùi d√¢n v·ªÅ vi·ªác GCN c·∫•p kh√¥ng ƒë√∫ng.', 'GCN ƒë√£ c·∫•p (b·∫£n g·ªëc).'], notes: ['ƒê√¢y l√† th·ªß t·ª•c ph·ª©c t·∫°p, th·ªùi gian gi·∫£i quy·∫øt d√†i nh·∫•t.'] },
            { id: 'giay_tay', title: 'ƒêƒÉng k√Ω ƒë·∫•t "gi·∫•y tay"', time: 30, docs: ['ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'B·∫£n g·ªëc GCN c·ªßa b√™n b√°n (n·∫øu c√≥).', 'Gi·∫•y t·ªù v·ªÅ vi·ªác chuy·ªÉn quy·ªÅn c√≥ ƒë·ªß ch·ªØ k√Ω c·ªßa b√™n chuy·ªÉn v√† b√™n nh·∫≠n.'], notes: ['Th·ªùi gian t√≠nh t·ª´ ng√†y ni√™m y·∫øt c√¥ng khai m√† kh√¥ng c√≥ tranh ch·∫•p.'] },
        ];
        const feeData = {
            le_phi: { canhan: { thanhpho: { cap_moi: 100000, cap_doi: 39000 }, conlai: { cap_moi: 70000, cap_doi: 20000 } }, tochuc: { thanhpho: { cap_moi: 700000, cap_doi: 700000 }, conlai: { cap_moi: 700000, cap_doi: 700000 } } },
            phi_tham_dinh: {
                canhan: { cap_moi_dat: { direct: 880000, online: 836000 }, cap_moi_taisankhong: { direct: 980000, online: 931000 }, cap_moi_datvataisan: { direct: 1250000, online: 1187500 }, cap_doi: { direct: 1080000, online: 1026000 }, bien_dong_capmoi: { direct: 720000, online: 684000 }, bien_dong_xacnhan: { direct: 590000, online: 560500 } },
                tochuc: { cap_moi_dat: { direct: 1260000, online: 1197000 }, cap_moi_taisankhong: { direct: 1840000, online: 1748000 }, cap_moi_datvataisan: { direct: 2090000, online: 1985500 }, cap_doi: { direct: 1260000, online: 1197000 }, bien_dong_capmoi: { direct: 1410000, online: 1339500 }, bien_dong_xacnhan: { direct: 1200000, online: 1140000 } }
            }
        };
        const feeProcedureOptions = [ { value: 'cap_moi_dat', text: 'C·∫•p m·ªõi (ch·ªâ c√≥ QSD ƒë·∫•t)' }, { value: 'cap_moi_taisankhong', text: 'C·∫•p m·ªõi (ch·ªâ c√≥ t√†i s·∫£n)' }, { value: 'cap_moi_datvataisan', text: 'C·∫•p m·ªõi (c·∫£ ƒë·∫•t v√† t√†i s·∫£n)' }, { value: 'cap_doi', text: 'C·∫•p ƒë·ªïi / C·∫•p l·∫°i' }, { value: 'bien_dong_capmoi', text: 'ƒêƒÉng k√Ω bi·∫øn ƒë·ªông (c·∫•p GCN m·ªõi)' }, { value: 'bien_dong_xacnhan', text: 'ƒêƒÉng k√Ω bi·∫øn ƒë·ªông (x√°c nh·∫≠n v√†o GCN)' } ];
        const applicantOptions = [ { value: 'canhan', text: 'H·ªô gia ƒë√¨nh, c√° nh√¢n' }, { value: 'tochuc', text: 'T·ªï ch·ª©c' } ];
        const regionOptions = [ { value: 'thanhpho', text: 'C√°c ph∆∞·ªùng thu·ªôc TP. Bi√™n H√≤a, Long Kh√°nh' }, { value: 'conlai', text: 'C√°c ƒë·ªãa b√†n c√≤n l·∫°i' } ];

        // --- GLOBAL ELEMENTS ---
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.main-section');
        const mobileNav = document.getElementById('mobile-nav');

        // --- NAVIGATION LOGIC ---
        function navigateTo(targetId) {
            sections.forEach(section => {
                section.classList.toggle('active', section.id === targetId);
            });
            navLinks.forEach(link => {
                link.classList.toggle('active', link.hash === `#${targetId}`);
            });
            if(mobileNav.value !== targetId) {
                mobileNav.value = targetId;
            }
        }
        navLinks.forEach(link => link.addEventListener('click', (e) => {
            e.preventDefault();
            navigateTo(e.currentTarget.hash.substring(1));
        }));
        mobileNav.addEventListener('change', (e) => navigateTo(e.currentTarget.value));
        
        // --- PROCEDURE TOOL LOGIC ---
        function setupProcedureTool() {
            const proceduresGrid = document.getElementById('procedures-grid');
            const detailsContainer = document.getElementById('details-container');
            const detailsSection = document.getElementById('details-section');
            let activeCard = null;

            proceduresData.forEach(proc => {
                const cardWrapper = document.createElement('div');
                cardWrapper.className = 'w-[calc(50%-0.5rem)] sm:w-[calc(33.333%-0.667rem)] md:w-[calc(25%-0.75rem)] lg:w-[calc(20%-0.8rem)]';
                const card = document.createElement('div');
                card.className = 'procedure-card h-full flex flex-col justify-center text-center';
                card.dataset.id = proc.id;
                card.innerHTML = `<h3 class="font-bold text-sm sm:text-base text-slate-900">${proc.title}</h3><p class="text-xs sm:text-sm text-slate-500 mt-1">${proc.time ? `~ ${proc.time} ng√†y` : 'Theo quy tr√¨nh'}</p>`;
                card.addEventListener('click', () => {
                    const procedure = proceduresData.find(p => p.id === proc.id);
                    if (!procedure) return;
                    if (activeCard) activeCard.classList.remove('active');
                    activeCard = card;
                    card.classList.add('active');
                    
                    detailsContainer.innerHTML = `
                        <div class="w-full">
                            <h3 class="text-xl sm:text-2xl font-bold text-blue-700 mb-6 text-center">${procedure.title}</h3>
                            <div class="grid md:grid-cols-2 gap-x-8 gap-y-8">
                                <div><h4 class="text-lg font-semibold mb-3 text-slate-800">H·ªì s∆° c·∫ßn chu·∫©n b·ªã</h4><ul class="list-disc space-y-2 text-slate-600 pl-5">${procedure.docs.map(d => `<li>${d}</li>`).join('')}</ul></div>
                                <div><h4 class="text-lg font-semibold mb-3 text-slate-800">Th·ªùi gian & L∆∞u √Ω</h4><p class="text-slate-600 mb-4"><strong>Th·ªùi gian gi·∫£i quy·∫øt:</strong> ${procedure.time ? `Kh√¥ng qu√° ${procedure.time} ng√†y l√†m vi·ªác.` : 'T√πy thu·ªôc v√†o quy tr√¨nh c·ª• th·ªÉ.'}</p>${procedure.notes.length > 0 ? `<strong class="text-slate-800">L∆∞u √Ω quan tr·ªçng:</strong><ul class="list-disc space-y-2 text-slate-600 mt-2 pl-5">${procedure.notes.map(n => `<li>${n}</li>`).join('')}</ul>` : ''}</div>
                            </div>
                        </div>`;
                    detailsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
                cardWrapper.appendChild(card);
                proceduresGrid.appendChild(cardWrapper);
            });
            
            const timeChartData = proceduresData.filter(p => p.time !== null).sort((a,b) => a.time - b.time);
            const timeChartContainer = document.getElementById('time-chart-container');
            const timeChartCanvas = document.getElementById('timeChart').getContext('2d');
            timeChartContainer.style.height = `${80 + timeChartData.length * 32}px`;

            new Chart(timeChartCanvas, {
                type: 'bar',
                data: { labels: timeChartData.map(p => p.title), datasets: [{ label: 'S·ªë ng√†y l√†m vi·ªác t·ªëi ƒëa', data: timeChartData.map(p => p.time), backgroundColor: '#3b82f6', borderColor: '#1e3a8a', borderWidth: 1, borderRadius: 4 }] },
                options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, scales: { x: { beginAtZero: true, title: { display: true, text: 'S·ªë ng√†y l√†m vi·ªác' } }, y: { ticks: { autoSkip: false, font: { size: 12 } } } }, plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => `S·ªë ng√†y: ${c.parsed.x}` } } } }
            });
        }

        // --- FEE CALCULATOR LOGIC ---
        function setupFeeCalculator() {
            const procedureEl = document.getElementById('feeProcedureType');
            const applicantEl = document.getElementById('applicantType');
            const regionEl = document.getElementById('region');
            const costDirectEl = document.getElementById('cost-direct');
            const costOnlineEl = document.getElementById('cost-online');
            const savingsEl = document.getElementById('savings');

            const populateSelect = (el, options) => {
                el.innerHTML = options.map(o => `<option value="${o.value}">${o.text}</option>`).join('');
            };
            populateSelect(procedureEl, feeProcedureOptions);
            populateSelect(applicantEl, applicantOptions);
            populateSelect(regionEl, regionOptions);
            
            function formatCurrency(value) {
                return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(value);
            }
            
            function calculateCost() {
                const procedure = procedureEl.value;
                const applicant = applicantEl.value;
                const region = regionEl.value;
                let lePhi = 0;
                const lePhiType = (procedure.startsWith('cap_moi')) ? 'cap_moi' : 'cap_doi';

                if (feeData.le_phi[applicant] && feeData.le_phi[applicant][region]) {
                    lePhi = feeData.le_phi[applicant][region][lePhiType] || 0;
                }
                if (procedure === 'bien_dong_xacnhan' || procedure === 'cap_moi_taisankhong') {
                    lePhi = (applicant === 'canhan') ? ((region === 'thanhpho') ? 39000 : 20000) : 50000;
                }
                const lePhiOnline = (applicant === 'canhan') ? 0 : lePhi;
                const phiThamDinh = feeData.phi_tham_dinh[applicant][procedure];

                if (!phiThamDinh) {
                    costDirectEl.textContent = "Kh√¥ng √°p d·ª•ng";
                    costOnlineEl.textContent = "Kh√¥ng √°p d·ª•ng";
                    savingsEl.textContent = "";
                    return;
                }

                const totalDirect = lePhi + phiThamDinh.direct;
                const totalOnline = lePhiOnline + phiThamDinh.online;
                const savingAmount = totalDirect - totalOnline;

                costDirectEl.textContent = formatCurrency(totalDirect);
                costOnlineEl.textContent = formatCurrency(totalOnline);
                savingsEl.innerHTML = `üí∞ Ti·∫øt ki·ªám ${formatCurrency(savingAmount)} khi n·ªôp tr·ª±c tuy·∫øn!`;
            }

            [procedureEl, applicantEl, regionEl].forEach(el => el.addEventListener('change', calculateCost));
            calculateCost();
        }

        // --- ACCORDION LOGIC ---
        function setupAccordion() {
            const accordionItems = document.querySelectorAll('.accordion-item');
            accordionItems.forEach(item => {
                const header = item.querySelector('.accordion-header');
                header.addEventListener('click', () => {
                    item.classList.toggle('active');
                });
            });
        }
        
        // --- INITIALIZATION ---
        setupProcedureTool();
        setupFeeCalculator();
        setupAccordion();
        navigateTo(window.location.hash ? window.location.hash.substring(1) : 'thu-tuc');
    });
    </script>
</body>
</html>
